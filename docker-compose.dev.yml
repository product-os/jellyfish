version: "3"
services:
  web:
    build: .
    command: make start-server
    ports:
     - "8000:8000"
    links:
     - rethinkdb
     - redis
    volumes: [
      ".:/usr/src/app"
    ]
    environment:
     - DB_HOST=rethinkdb
     - DB_USER=admin
     - DB_PASSWORD=12345678
     - REDIS_HOST=redis
     - REDIS_PASSWORD=12345678
     - NODE_ENV=debug
  rethinkdb:
    image: balena/balena-rethinkdb
    environment:
     - DB_PASSWORD=12345678
    ports:
     - "8080:8080"
     - "28015:28015"
  redis:
    image: balena/balena-redis
    environment:
     - REDIS_PASSWORD=12345678
    ports:
     - "6379:6379"
