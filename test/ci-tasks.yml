tickTimeout: 5
retryTimeout: 120
attemptsDefault: 3
environment:
  - name: 'AVA_OPTS'
    value: '--fail-fast'
tasks:
  - name: 'checkout-master'
    description: 'Checkout master branch'
    command: '/usr/src/jellyfish/scripts/ci/checkout-master.sh'
    cwd: '/usr/src/jellyfish'
    required: true
    attempts: 1
  - name: 'clean-github'
    description: 'GitHub Test Data Cleanup'
    command: 'make clean-github'
    cwd: '/usr/src/jellyfish'
    required: false
    attempts: 1
  - name: 'clean-front'
    description: 'Front Test Data Cleanup'
    command: 'make clean-front'
    cwd: '/usr/src/jellyfish'
    required: false
    attempts: 1
    dependencies:
      - 'clean-github'
      - 'front-mirror'
  - name: 'pipeline-sync'
    description: 'Pipeline Sync Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/integration/sync/pipeline.spec.js'
  - name: 'front-mirror'
    description: 'Front Mirror Tests'
    command: 'make test'
    cwd: '/usr/src/jellyfish'
    required: true
    environment:
      - name: 'FILES'
        value: './test/e2e/sync/front-mirror.spec.js'
