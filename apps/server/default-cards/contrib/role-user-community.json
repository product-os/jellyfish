{
  "slug": "role-user-community",
  "name": "Community role permissions",
  "version": "1.0.0",
  "type": "role",
  "tags": [],
  "markers": [],
  "links": {},
  "requires": [],
  "capabilities": [],
  "active": true,
  "data": {
    "read": {
      "type": "object",
      "required": [ "active" ],
      "properties": {
        "active": {
          "type": "boolean",
          "const": true
        }
      },
      "anyOf": [
        {
          "type": "object",
          "additionalProperties": true,
          "required": [ "type" ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "link",
                "account",
                "agenda",
                "architecture-topic",
                "contact",
                "checkin",
                "discussion-topic",
                "feedback-item",
                "issue",
                "message",
                "opportunity",
                "org",
                "organizer",
                "os-test-result",
                "pull-request",
                "product-improvement",
                "project",
                "sales-thread",
                "specification",
                "support-issue",
                "support-thread",
                "symptom",
                "tag",
                "thread",
                "todo",
                "triggered-action",
                "whisper",
                "workflow",
                "link@1.0.0",
                "account@1.0.0",
                "agenda@1.0.0",
                "architecture-topic@1.0.0",
                "contact@1.0.0",
                "checkin@1.0.0",
                "discussion-topic@1.0.0",
                "feedback-item@1.0.0",
                "issue@1.0.0",
                "message@1.0.0",
                "opportunity@1.0.0",
                "org@1.0.0",
                "organizer@1.0.0",
                "os-test-result@1.0.0",
                "pull-request@1.0.0",
                "product-improvement@1.0.0",
                "project@1.0.0",
                "sales-thread@1.0.0",
                "specification@1.0.0",
                "support-issue@1.0.0",
                "support-thread@1.0.0",
                "symptom@1.0.0",
                "tag@1.0.0",
                "thread@1.0.0",
                "todo@1.0.0",
                "triggered-action@1.0.0",
                "whisper@1.0.0",
                "workflow@1.0.0"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [ "slug", "type" ],
          "additionalProperties": true,
          "properties": {
            "slug": {
              "type": "string",
              "enum": [
                "session",
                "user",
                "account",
                "link",
                "action-request",
                "contact",
                "view",
                "tag",
                "message",
                "whisper",
                "workflow",
                "issue",
                "support-thread",
                "support-issue",
                "thread"
              ]
            },
            "type": {
              "type": "string",
              "enum": [ "type", "type@1.0.0" ]
            }
          }
        },
        {
          "type": "object",
          "required": [ "id", "type", "data" ],
          "properties": {
            "id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "action",
                "create",
                "update",
                "action@1.0.0",
                "create@1.0.0",
                "update@1.0.0"
              ]
            },
            "data": {
              "type": "object",
              "additionalProperties": true
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": true,
          "required": [ "data", "type" ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "view",
                "session",
                "execute",
                "view@1.0.0",
                "session@1.0.0",
                "execute@1.0.0"
              ]
            },
            "data": {
              "type": "object",
              "required": [ "actor" ],
              "additionalProperties": true,
              "properties": {
                "actor": {
                  "type": "string",
                  "const": {
                    "$eval": "user.id"
                  }
                }
              }
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": true,
          "required": [ "slug", "type", "data" ],
          "properties": {
            "slug": {
              "type": "string",
              "const": {
                "$eval": "user.slug"
              }
            },
            "type": {
              "type": "string",
              "enum": [ "user", "user@1.0.0" ]
            },
            "data": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "email": {
                  "type": [ "string", "array" ]
                },
                "hash": {
                  "type": "string"
                },
                "avatar": {
                  "type": [ "string", "null" ]
                },
                "oauth": {
                  "type": "object",
                  "additionalProperties": true
                },
                "profile": {
                  "type": "object",
                  "additionalProperties": true
                }
              }
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": true,
          "required": [ "slug", "type", "data" ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [ "view", "view@1.0.0" ]
            },
            "slug": {
              "type": "string",
              "not": {
                "enum": [
                  "view-active",
                  "view-active-triggered-actions",
                  "view-non-executed-action-requests",
                  "view-all-users"
                ]
              }
            },
            "data": {
              "type": "object",
              "additionalProperties": true
            }
          }
        },
        {
          "type": "object",
          "additionalProperties": true,
          "required": [ "id", "type", "data", "slug" ],
          "properties": {
            "id": {
              "type": "string"
            },
            "slug": {
              "type": "string",
              "not": {
                "enum": [
                  "user-admin",
                  "user-guest"
                ]
              }
            },
            "type": {
              "type": "string",
              "enum": [ "user", "user@1.0.0" ]
            },
            "data": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "email": {
                  "type": [ "string", "array" ]
                },
                "avatar": {
                  "type": [ "string", "null" ]
                }
              }
            }
          }
        }
      ]
    }
  }
}
